#!/usr/bin/env zsh
# set $0 (ref: zdharma.org/Zsh-100-Commits-Club/Zsh-Plugin-Standard.html#zero-handling)
0="${${ZERO:-${0:#$ZSH_ARGZERO}}:-${(%):-%N}}"
0="${${(M)0:#/*}:-$PWD/$0}"

# load library functions
fpath+=("${0%/*}/lib")
autoload -z ls-color::{init,from-mode,from-name}

# init (sets modecolors and namecolors)
ls-color::init
# Optional argument can be used instead of LS_COLORS
#ls-color::init "$LS_COLORS:*.md=01;03"

# colors can also be added for other globs after init as well:
namecolors[*.md]='01'                  # bold markdown files

# EXTENDED_GLOB is enabled when matching, so things like this are possible:
namecolors[(#i)(*/|)license(|.*)]='04'  # underline LICENSE, or license.txt, or similar

# color each file in the argument list
local file reply
for file; do
	ls-color::from-name $file 3

	# point to symlink resolution if it exists
	print '\e['$reply[1]'m'$file'\e[0m'${reply[3]:+' â†’ \e['$reply[3]'m'$reply[4]'\e[0m'}
done
